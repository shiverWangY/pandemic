(function(t){function e(e){for(var i,a,c=e[0],l=e[1],s=e[2],u=0,h=[];u<c.length;u++)a=c[u],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&h.push(r[a][0]),r[a]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);d&&d(e);while(h.length)h.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,c=1;c<n.length;c++){var l=n[c];0!==r[l]&&(i=!1)}i&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var i={},r={app:0},o=[];function a(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=i,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var s=0;s<c.length;s++)e(c[s]);var d=l;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"18d0":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("7a23"),r=n("2d75"),o={id:"main_div"};function a(t,e,n,r,a,c){var l=Object(i["resolveComponent"])("HelloWorld");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",o,[Object(i["createVNode"])(l)])}n("b0c0"),n("b680");var c=function(t){return Object(i["pushScopeId"])("data-v-5dd8dadc"),t=t(),Object(i["popScopeId"])(),t},l={key:0,points:"0,13 25,0 0,-13",stroke:"white"},s={key:1,y:"-13",x:"-5",width:"25",height:"25",stroke:"white"},d=c((function(){return Object(i["createElementVNode"])("rect",{stroke:"white",height:"30",width:"90",fill:"none",rx:"5"},null,-1)})),u={dy:"18",dx:"45","text-anchor":"middle",fill:"white","font-size":"16","font-weight":"bold"},h={id:"background",class:"zoom"},f=["d"],p=["d"],g=["onMouseover","d"],b=["dx","dy"],_={id:"people",class:"zoom"},x=c((function(){return Object(i["createElementVNode"])("g",{id:"chain"},null,-1)})),y=["cx","cy","r","stroke-width","fill","onMousemove"],m=c((function(){return Object(i["createElementVNode"])("rect",{height:"30",width:"160",fill:"black",stroke:"white",rx:"5"},null,-1)})),j={fill:"white",dx:"5",dy:"20","font-size":"13"},O=c((function(){return Object(i["createElementVNode"])("line",{x1:"138",x2:"146",y1:"12",y2:"20",stroke:"white","stroke-width":"1.5"},null,-1)})),k=c((function(){return Object(i["createElementVNode"])("line",{x1:"154",x2:"145.5",y1:"12",y2:"20.5",stroke:"white","stroke-width":"1.5"},null,-1)})),w=["transform"],v=c((function(){return Object(i["createElementVNode"])("rect",{fill:"black",stroke:"#929292",height:"220",width:"200",rx:"10"},null,-1)})),E=c((function(){return Object(i["createElementVNode"])("text",{fill:"white","font-size":"12",dy:"20",dx:"10"}," 感染者ID： ",-1)})),N={fill:"white","font-size":"12",dy:"40",dx:"190","text-anchor":"end"},V=c((function(){return Object(i["createElementVNode"])("text",{fill:"white","font-size":"12",dy:"60",dx:"10"}," 感染日期： ",-1)})),B={fill:"white","font-size":"12",dy:"80",dx:"190","text-anchor":"end"},z=c((function(){return Object(i["createElementVNode"])("text",{fill:"white","font-size":"12",dy:"100",dx:"10"}," 感染类型： ",-1)})),S={fill:"white","font-size":"12",dy:"120",dx:"190","text-anchor":"end"},D=c((function(){return Object(i["createElementVNode"])("text",{fill:"white","font-size":"12",dy:"140",dx:"10"}," 居住地址： ",-1)})),F={fill:"white","font-size":"12",dy:"160",dx:"190","text-anchor":"end"},A=c((function(){return Object(i["createElementVNode"])("text",{fill:"white","font-size":"12",dy:"180",dx:"10"}," 上游ID： ",-1)})),C={fill:"white","font-size":"12",dy:"200",dx:"190","text-anchor":"end"},M={style:{position:"absolute",left:"200px",top:"100px","border-radius":"10px",height:"300px",width:"300px","background-color":"black",border:"1px solid white"}},I=c((function(){return Object(i["createElementVNode"])("g",{id:"dots"},null,-1)})),U=c((function(){return Object(i["createElementVNode"])("text",{dx:"10",dy:"20",fill:"white","font-size":"14"}," 传染源ID ",-1)})),L=c((function(){return Object(i["createElementVNode"])("line",{x1:"280",x2:"290",y1:"10",y2:"20",stroke:"white","stroke-width":"3","stroke-opacity":"0.6"},null,-1)})),P=c((function(){return Object(i["createElementVNode"])("line",{x1:"280",x2:"290",y1:"20",y2:"10",stroke:"white","stroke-width":"3","stroke-opacity":"0.6"},null,-1)})),X=[U,L,P],Y={key:0,style:{position:"absolute",left:"30px",top:"140px","border-radius":"10px",height:"260px",width:"160px","background-color":"black",border:"1px solid white"}},H={fill:"white",dy:"20",dx:"10","font-size":"12"},W={fill:"white",dy:"40",dx:"10","font-size":"12"},T={fill:"white",dy:"60",dx:"10","font-size":"12"},q={fill:"white",dy:"80",dx:"10","font-size":"12"},J={fill:"white",dy:"100",dx:"10","font-size":"12"},G={fill:"white",dy:"120",dx:"10","font-size":"12"},K={fill:"white",dy:"140",dx:"10","font-size":"12"},Q={fill:"white",dy:"160",dx:"10","font-size":"12"},R=c((function(){return Object(i["createElementVNode"])("text",{fill:"white",dy:"190",dx:"10","font-size":"12"}," 说明：仅统计已公布数据 ",-1)})),Z=c((function(){return Object(i["createElementVNode"])("text",{fill:"gold",dy:"225",dx:"10","font-size":"16"}," 北京疫情可视化 ",-1)})),$=c((function(){return Object(i["createElementVNode"])("text",{fill:"red",dy:"250",dx:"150","font-size":"16","text-anchor":"end"}," V1.2 ",-1)})),tt=["max"],et=["dx"],nt=c((function(){return Object(i["createElementVNode"])("g",{id:"ranking"},null,-1)})),it={id:"axis"},rt=["y2"],ot=c((function(){return Object(i["createElementVNode"])("line",{x1:"30",x2:"26",y1:"25",y2:"32",stroke:"white"},null,-1)})),at=c((function(){return Object(i["createElementVNode"])("line",{x1:"30",x2:"34",y1:"25",y2:"32",stroke:"white"},null,-1)})),ct=["x1","x2","y1","y2"],lt=["x1","x2","y1","y2"],st=["x2","y1","y2"],dt={id:"lines"},ut=["d","stroke"],ht={id:"legend"},ft=["transform"],pt=["fill"],gt={fill:"white","font-size":"12","text-anchor":"start",dx:"15",dy:"9"},bt=["x","height"];function _t(t,e,n,r,o,a){return Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],null,[(Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",{id:"mainsvg",style:Object(i["normalizeStyle"])(a.style),onClick:e[5]||(e[5]=function(t){return a.log()})},[Object(i["createElementVNode"])("g",{transform:"translate(125,30)",cursor:"pointer",onClick:e[0]||(e[0]=function(t){return o.time_flag=!o.time_flag})},[o.time_flag?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createElementBlock"])("polygon",l)),o.time_flag?(Object(i["openBlock"])(),Object(i["createElementBlock"])("rect",s)):Object(i["createCommentVNode"])("",!0)]),Object(i["createElementVNode"])("g",{transform:"translate(20,15)",onClick:e[1]||(e[1]=function(t){return o.cumulated=!o.cumulated}),cursor:"pointer"},[d,Object(i["createElementVNode"])("text",u,Object(i["toDisplayString"])(o.cumulated?"累积":"每日"),1)]),Object(i["createElementVNode"])("g",h,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(o.geo_data.outer.features,(function(t,e){return Object(i["openBlock"])(),Object(i["createElementBlock"])("path",{class:"outer",key:e,fill:"None",stroke:"white","stroke-opacity":"0.3","stroke-width":"0.5px",d:a.map_path(t)},null,8,f)})),128)),(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(o.geo_data.outer2.features,(function(t,e){return Object(i["openBlock"])(),Object(i["createElementBlock"])("path",{class:"outer2",key:e,fill:"None",stroke:"white","stroke-opacity":"0.3","stroke-width":"0.5px",d:a.map_path(t)},null,8,p)})),128)),(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(o.geo_data.inner.features,(function(t,n){return Object(i["openBlock"])(),Object(i["createElementBlock"])("path",{class:"inner",key:n,onMouseover:function(e){return o.district=t.properties.name},onMouseout:e[2]||(e[2]=function(t){return o.district=""}),fill:"none",stroke:"white","stroke-opacity":"0.7","stroke-width":"2",d:a.map_path(t)},null,40,g)})),128)),(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(o.geo_data.inner.features,(function(t,e){return Object(i["openBlock"])(),Object(i["createElementBlock"])("text",{class:"dis_label",key:e,fill:"white",dx:a.projection(t.properties.centroid)[0],dy:a.projection(t.properties.centroid)[1],"text-anchor":"middle","font-size":"12"},Object(i["toDisplayString"])(t.properties.name),9,b)})),128))]),Object(i["createElementVNode"])("g",_,[x,Object(i["createElementVNode"])("g",null,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(a.show_data,(function(t){return Object(i["openBlock"])(),Object(i["createElementBlock"])("circle",{class:"person",key:t.index,cx:a.projection(t.xy)[0],cy:a.projection(t.xy)[1],r:"无症状"==t.type?3:"轻型"==t.type?5:8,"fill-opacity":"0.7","stroke-width":t.id==o.tip_data.id?2:0,stroke:"white",fill:"无症状"==t.type?"#F6F7BB":"轻型"==t.type?"#FFBF81":"#FF5D53",onMousemove:function(e){return a.update_mouse(t,"person")},onMouseout:e[3]||(e[3]=function(t){return a.mouse_off()})},null,40,y)})),128))])]),Object(i["createElementVNode"])("g",{id:"select_chain",transform:"translate(20,80)",onClick:e[4]||(e[4]=function(t){return o.show_select=!o.show_select})},[m,Object(i["createElementVNode"])("text",j," 传播链:"+Object(i["toDisplayString"])("未选择"==o.chain_selected?o.chain_selected:"传染源 — "+o.chain_selected),1),O,k]),"person"==o.tip?(Object(i["openBlock"])(),Object(i["createElementBlock"])("g",{key:0,id:"tips",transform:"translate("+[o.mouseXY[0]+20,o.mouseXY[1]-100]+")"},[v,E,Object(i["createElementVNode"])("text",N,Object(i["toDisplayString"])(o.tip_data.id),1),V,Object(i["createElementVNode"])("text",B,Object(i["toDisplayString"])((""+o.tip_data.date).substring(0,4)+"年"+(""+o.tip_data.date).substring(4,6)+"月"+(""+o.tip_data.date).substring(6,8)+"日"),1),z,Object(i["createElementVNode"])("text",S,Object(i["toDisplayString"])(o.tip_data.type),1),D,Object(i["createElementVNode"])("text",F,Object(i["toDisplayString"])(o.tip_data.address.substring(0,16)),1),A,Object(i["createElementVNode"])("text",C,Object(i["toDisplayString"])(o.tip_data.source),1)],8,w)):Object(i["createCommentVNode"])("",!0)],4)),Object(i["withDirectives"])((Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",M,[I,Object(i["createElementVNode"])("g",{onClick:e[6]||(e[6]=function(t){return o.show_select=!1})},X)],512)),[[i["vShow"],o.show_select]]),a.daily.length>0?(Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",Y,[Object(i["createElementVNode"])("g",null,[Object(i["createElementVNode"])("text",H," 日期："+Object(i["toDisplayString"])((""+a.date_select).substring(0,4)+"年"+(""+a.date_select).substring(4,6)+"月"+(""+a.date_select).substring(6,8)+"日"),1),Object(i["createElementVNode"])("text",W," 感染统计："+Object(i["toDisplayString"])("未选择"==o.chain_selected?"所有感染者":"传播链 — "+o.chain_selected),1),Object(i["createElementVNode"])("text",T," 新增无症状："+Object(i["toDisplayString"])(a.sta_data[a.date_select]["wuzhengzhuang"]),1),Object(i["createElementVNode"])("text",q," 新增确诊："+Object(i["toDisplayString"])(a.sta_data[a.date_select]["quezhen"]),1),Object(i["createElementVNode"])("text",J," 新增感染者："+Object(i["toDisplayString"])(a.sta_data[a.date_select]["dangri"]),1),Object(i["createElementVNode"])("text",G," 累计感染者："+Object(i["toDisplayString"])(a.sta_data[a.date_select]["leiji"]),1),Object(i["createElementVNode"])("text",K," 日增幅："+Object(i["toDisplayString"])((""+100*a.sta_data[a.date_select]["zengfu"].toFixed(5)).substring(0,5))+"% ",1),Object(i["createElementVNode"])("text",Q," 日增幅增幅："+Object(i["toDisplayString"])(20220422==a.date_select?0:0==a.sta_data[a.date_list[a.date_list.indexOf(a.date_select)-1]]["zengfu"]?(""+100*a.sta_data[a.date_select]["zengfu"].toFixed(5)).substring(0,5):(""+100*((a.sta_data[a.date_select]["zengfu"]-a.sta_data[a.date_list[a.date_list.indexOf(a.date_select)-1]]["zengfu"])/a.sta_data[a.date_list[a.date_list.indexOf(a.date_select)-1]]["zengfu"]).toFixed(5)).substring(0,5))+"% ",1),R,Z,$])])):Object(i["createCommentVNode"])("",!0),Object(i["withDirectives"])(Object(i["createElementVNode"])("input",{type:"range",min:"0",max:a.date_list.length-1,"onUpdate:modelValue":e[7]||(e[7]=function(t){return o.date_index=t})},null,8,tt),[[i["vModelText"],o.date_index]]),(Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",{style:Object(i["normalizeStyle"])(a.style2)},[Object(i["createElementVNode"])("text",{dx:o.width/4,"text-anchor":"middle",fill:"white","font-size":"20",dy:"30","font-weight":"bold"},"感染人数: "+Object(i["toDisplayString"])(o.cumulated?"累积":"每日"),9,et),nt],4)),(Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",{style:Object(i["normalizeStyle"])(a.style3),id:"svg3"},[Object(i["createElementVNode"])("g",it,[Object(i["createElementVNode"])("line",{x1:"30",x2:"30",y1:"25",y2:25+a.axis_config.height,stroke:"white"},null,8,rt),ot,at,Object(i["createElementVNode"])("line",{x1:30+a.axis_config.width,x2:23+a.axis_config.width,y1:25+a.axis_config.height,y2:21+a.axis_config.height,stroke:"white"},null,8,ct),Object(i["createElementVNode"])("line",{x1:30+a.axis_config.width,x2:23+a.axis_config.width,y1:25+a.axis_config.height,y2:29+a.axis_config.height,stroke:"white"},null,8,lt),Object(i["createElementVNode"])("line",{x1:"30",x2:30+a.axis_config.width,y1:25+a.axis_config.height,y2:25+a.axis_config.height,stroke:"white"},null,8,st)]),Object(i["createElementVNode"])("g",dt,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(a.line_data,(function(t,e){return Object(i["openBlock"])(),Object(i["createElementBlock"])("path",{key:e,d:a.line_g(t),stroke:o.color_scale2(e),fill:"none"},null,8,ut)})),128))]),Object(i["createElementVNode"])("g",ht,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(o.type_list,(function(t,e){return Object(i["openBlock"])(),Object(i["createElementBlock"])("g",{key:e,transform:"translate("+(e*a.axis_config.width/5+130)+",10)"},[Object(i["createElementVNode"])("rect",{height:"10",width:"10",fill:o.color_scale2(e),rx:"3"},null,8,pt),Object(i["createElementVNode"])("text",gt,Object(i["toDisplayString"])(t),1)],8,ft)})),128))]),o.event_data.length?(Object(i["openBlock"])(),Object(i["createElementBlock"])("rect",{key:0,id:"move",fill:"black",x:30+o.date_index*(a.axis_config.width/a.date_list.length)+a.axis_config.width/a.date_list.length,y:"33",height:a.axis_config.height-13,width:"1000"},null,8,bt)):Object(i["createCommentVNode"])("",!0)],4))],64)}n("4de4"),n("d3b7"),n("4e82"),n("6062"),n("3ca3"),n("ddb0"),n("a630"),n("ac1f"),n("1276"),n("d81d");var xt=n("6e58"),yt={name:"maps",data:function(){return{width:2*document.documentElement.clientWidth/3,height:document.documentElement.clientHeight-20,geo_data:{inner:{},outer:{},outer2:{}},event_data:[],date_index:0,cumulated:!0,time_flag:!1,timer:0,color_scale:xt["scale"].category20c(),color_scale2:xt["scale"].category20(),type_list:["无症状","轻型","普通型"],show_depth:6,line_timer:0,now_depth:-1,chain_selected:"未选择",show_select:!1,tip:!1,mouseXY:[],tip_data:{},district:"顺义区"}},mounted:function(){var t=this;function e(){xt["selectAll"](".zoom").attr("transform","translate("+xt["event"].translate+")scale("+xt["event"].scale+")")}xt["json"]("北京市.json",(function(e){t.geo_data.inner=e})),xt["json"]("河北省.json",(function(e){t.geo_data.outer=e})),xt["json"]("天津市.json",(function(e){t.geo_data.outer2=e})),xt["csv"]("event.csv",(function(e){t.event_data=e})),xt["select"]("#mainsvg").call(xt["behavior"].zoom().scaleExtent([1,3]).on("zoom",e))},computed:{sta_data:function(){for(var t={},e=0;e<this.date_list.length;e++){for(var n=new Object,i=0,r=0,o=0,a=0;a<this.chain_id.length;a++){var c=this.daily2[this.chain_id[a]];c.date<=this.date_list[e]&&i++,c.date==this.date_list[e]&&("无症状"==c.type?r++:o++)}var l=r+o;n.leiji=i,n.dangri=l,n.wuzhengzhuang=r,n.quezhen=o,n.zengfu=0==i?0:i==l?1:l/(i-l),t[this.date_list[e]]=n}return t},chain_id:function(){var t=[];if("未选择"==this.chain_selected)for(var e=0;e<this.daily.length;e++)t.push(this.daily[e].id);else{for(var n,i=0;i<this.chain.length;i++)if(this.chain[i].id==this.chain_selected){n=this.chain[i];break}var r=[n];while(r.length>0)for(var o=0;o<r.length;o++){var a=r.shift();t.push(a.id);for(var c=0;c<a.children.length;c++)r.push(a.children[c])}}return t},chain_data:function(){for(var t=[],e=0;e<this.chain.length;e++)t.push(this.bfs(this.chain[e]));return t},depth_list:function(){for(var t=[],e=0;e<this.show_depth;e++)t.push(e);return t},level:function(){for(var t=[],e=function e(n,i){for(var r=0;r<n.children.length;r++)t.push([n.id,n.children[r].id,i]),n.children[r].children.length>0&&e(n.children[r],i+1)},n=0;n<this.chain.length;n++)e(this.chain[n],0);return t},chain:function(){for(var t=[],e={},n=0;n<this.daily.length;n++){var i=this.daily[n].id;"Unknown"!=i&&(e[i]={})}for(var r=0;r<this.daily.length;r++){var o=this.daily[r].id,a=this.daily[r].source;if("Unknown"!=o){var c=new Object;c.parent="Unknown"==a?"Unknown":e[a],c.children=[],c.id=o,e[o]=c}}for(var l=0;l<this.daily.length;l++){var s=this.daily[l].source,d=this.daily[l].id;"Unknown"!=s&&e[s].children.push(e[d])}for(var u in e)"Unknown"==e[u].parent&&e[u].children.length>0&&t.push(e[u]);return t},line_data:function(){for(var t=this,e=[],n=["无症状","轻型","普通型"],i=function(i){for(var r=[],o=function(e){var o=new Object;o.x=e;var a=t.daily.filter((function(r){return r.date==t.date_list[e]&&r.type==n[i]})).length;o.y=a,r.push(o)},a=0;a<t.date_list.length;a++)o(a);e.push(r)},r=0;r<n.length;r++)i(r);return xt["layout"].stack().offset(0)(e)},line_g:function(){var t=xt["scale"].linear().domain([0,this.date_list.length-1]).range([30,this.axis_config.width+30]),e=xt["scale"].linear().domain([100,-10]).range([25,this.axis_config.height+25]);return xt["svg"].line().interpolate("basis").x((function(e){return t(e.x)})).y((function(t){return e(t.y+t.y0)}))},axis_config:function(){return{width:this.width/2-25-60,height:this.height/3-5-50}},watcher:function(){return this.bar_data.length},rank:function(){for(var t=[],e=0;e<this.bar_data.length;e++)t.push(this.bar_data[e].name);return t},length_scale:function(){return xt["scale"].linear().domain([0,400]).range([100,this.width/2])},bar_data:function(){for(var t=this,e=[],n=function(n){var i=t.district_list[n],r=new Object;r.name=i;var o=t.show_data.filter((function(t){return t.district==i})).length;r.count=o,e.push(r)},i=0;i<this.district_list.length;i++)n(i);return e.sort((function(t,e){return e.count-t.count}))},district_list:function(){for(var t=new Set,e=0;e<this.daily.length;e++)t.add(this.daily[e].district);return Array.from(t)},show_data:function(){var t=this;return this.cumulated?this.daily.filter((function(e){return e.date<=t.date_select&&-1!=t.chain_id.indexOf(e.id)})):this.daily.filter((function(e){return e.date==t.date_select&&-1!=t.chain_id.indexOf(e.id)}))},date_select:function(){return this.date_list[this.date_index]},date_list:function(){for(var t=new Set,e=0;e<this.daily.length;e++)t.add(this.daily[e].date);return Array.from(t).sort((function(t,e){return t-e}))},daily:function(){for(var t=[],e=0;e<this.event_data.length;e++){var n=this.event_data[e],i=parseInt(n["24时日期"].substring(0,4)+n["24时日期"].substring(5,7)+n["24时日期"].substring(8,10));if(i&&"未公布"!=n["感染者编号"]&&n["感染者编号"]){var r=new Object;r.date=i,r.id=n["感染者编号"]?n["感染者编号"]:"Unknown",r.index=n["表格ID"],r.daily_index=n["每日编号"],r.type=n["未命名1"],r.district=n["区"],r.address=n["居住地址"],r.source=""==n["上游"]||0==n["上游"]?"Unknown":n["上游"],r.source_address=n["上游地址"],r.data_problem=n["数据问题"]?n["数据问题"]:"No problem.";var o=n["坐标"].substring(6,n["坐标"].length-1).split(" ");r.xy=o.map((function(t){return parseFloat(t)}));var a=n["上游坐标"]?n["上游坐标"].substring(6,n["坐标"].length-1).split(" "):0;r.source_xy=a?a.map((function(t){return parseFloat(t)})):0,t.push(r)}}return t},daily2:function(){for(var t={},e=0;e<this.daily.length;e++)"Unknown"!=this.daily[e].id&&(t[this.daily[e].id]=this.daily[e]);return t},projection:function(){return xt["geo"].mercator().center([116.418757,40.47544]).scale(34e3*this.width/1800)},map_path:function(){return xt["geo"].path().projection(this.projection)},style:function(){return"background-color:black;position:absolute;border-radius: 15px;left:10px;top:10px;border:1.5px solid #0E021B;width:"+this.width+"px;height:"+this.height+"px;"},style2:function(){return"background-color:black;position:absolute;border-radius: 15px;top:10px;left:"+(this.width+15)+";border:1.5px solid #0E021B;width:"+(this.width/2-25)+"px;height:"+2*this.height/3+"px;"},style3:function(){return"background-color:black;position:absolute;border-radius: 15px;top:"+(2*this.height/3+15)+"px;left:"+(this.width+15)+";border:1.5px solid #0E021B;width:"+(this.width/2-25)+"px;height:"+(this.height/3-5)+"px;"},show_id:function(){for(var t=[],e=0;e<this.show_data.length;e++)t.push(this.show_data[e].id);return t}},methods:{mouse_off:function(){this.tip=!1,this.tip_data={},this.mouseXY=[]},update_mouse:function(t,e){this.tip||(this.tip_data=t),this.mouseXY=[event.offsetX,event.offsetY],this.tip=e},update_board:function(){var t=this;function e(){xt["select"]("#dots").selectAll("circle").attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y})),xt["select"]("#dots").selectAll("text").attr("dx",(function(t){return t.x})).attr("dy",(function(t){return t.y+3}))}var n=xt["layout"].force().size([300,300]).gravity(.2).charge(-300).friction(.7).on("tick",e).nodes(this.chain_data);xt["select"]("#dots").selectAll("circle").data(this.chain_data).enter().append("circle").attr("cx",100).attr("cy",100).attr("r",(function(t){return t.num/20+12})).attr("fill","black").attr("stroke",(function(e,n){return t.color_scale(n)})).on("mouseover",(function(){xt["select"](this).transition().attr("stroke-width",3)})).on("mouseout",(function(){xt["select"](this).transition().attr("stroke-width",1)})).on("click",(function(e){t.chain_selected==e.id?t.chain_selected="未选择":t.chain_selected=e.id})).call(n.drag),xt["select"]("#dots").selectAll("text").data(this.chain_data).enter().append("text").attr("text-anchor","middle").attr("dx",100).attr("dy",100).attr("font-size",(function(t){return t.num/100+10})).attr("fill","white").on("click",(function(e){t.chain_selected==e.id?t.chain_selected="未选择":t.chain_selected=e.id})).text((function(t){return t.id})),n.start()},bfs:function(t){var e=[t],n=0,i=0,r=t.id;while(e.length>0){for(var o=0;o<e.length;o++){var a=e.shift();i++;for(var c=0;c<a.children.length;c++)e.push(a.children[c])}n++}return{id:r,depth:n,num:i}},judge_in_show_data:function(t){return-1!=this.show_id.indexOf(t)},update_line:function(){var t=this;xt["select"]("#chain").selectAll("line").data(this.level).enter().append("line").attr("x1",(function(e){return t.projection(t.daily2[e[0]].xy)[0]})).attr("y1",(function(e){return t.projection(t.daily2[e[0]].xy)[1]})).attr("x2",(function(e){return t.projection(t.daily2[e[0]].xy)[0]})).attr("y2",(function(e){return t.projection(t.daily2[e[0]].xy)[1]})).attr("stroke","yellow"),xt["select"]("#chain").selectAll("line").data(this.level).filter((function(e){return t.judge_in_show_data(e[0])&&t.judge_in_show_data(e[1])})).transition().duration(1500).attr("x2",(function(e){return t.projection(t.daily2[e[1]].xy)[0]})).attr("y2",(function(e){return t.projection(t.daily2[e[1]].xy)[1]})),xt["select"]("#chain").selectAll("line").data(this.level).filter((function(e){return!t.judge_in_show_data(e[0])||!t.judge_in_show_data(e[1])})).transition().duration(1500).attr("x2",(function(e){return t.projection(t.daily2[e[0]].xy)[0]})).attr("y2",(function(e){return t.projection(t.daily2[e[0]].xy)[1]}))},log:function(){console.log(this.event_data),console.log(this.daily),console.log(this.date_list),console.log(this.show_data),console.log(this.district_list),console.log(this.bar_data),console.log(this.line_data),console.log(this.chain),console.log(this.level),console.log(this.daily2),console.log(this.chain_data),console.log(this.chain_id),console.log(this.sta_data),console.log(this.tip_data),console.log(this.district)},rank_updater:function(){var t=this;xt["select"]("#ranking").selectAll(".bars").data(this.district_list).enter().append("rect").attr("class","bars").attr("x",20).attr("height",2*this.height/3/this.district_list.length-10).attr("stroke-opacity",0),xt["select"]("#ranking").selectAll(".bars").data(this.district_list).transition().duration(800).attr("y",(function(e){return t.rank.indexOf(e)*(2*t.height/3/t.district_list.length-5)+50})).attr("stroke",(function(e){return t.color_scale(e)})).attr("width",(function(e){return t.length_scale(t.bar_data[t.rank.indexOf(e)].count)})).attr("stroke-opacity",1),xt["select"]("#ranking").selectAll(".texts").data(this.district_list).enter().append("text").attr("class","texts").attr("fill","white").attr("font-size",14).attr("text-anchor","middle").attr("fill-opacity",0),xt["select"]("#ranking").selectAll(".texts").data(this.district_list).transition().duration(800).attr("dx",(function(e){return t.length_scale(t.bar_data[t.rank.indexOf(e)].count)/2+20})).attr("dy",(function(e){return t.rank.indexOf(e)*(2*t.height/3/t.district_list.length-5)+65})).attr("fill-opacity",1).text((function(e){return e+" ："+t.bar_data[t.rank.indexOf(e)].count}))}},watch:{time_flag:function(t){var e=this;t?this.timer=setInterval((function(){e.date_index<e.date_list.length-1?e.date_index++:e.time_flag=!1}),2e3):clearInterval(this.timer)},date_index:function(){this.rank_updater(),this.cumulated?this.update_line():xt["select"]("#chain").selectAll("line").remove()},chain_selected:function(){var t=this;this.update_line(),xt["select"]("#dots").selectAll("circle").filter((function(e){return e.id==t.chain_selected})).transition().attr("fill","white").attr("fill-opacity",.5),xt["select"]("#dots").selectAll("circle").filter((function(e){return e.id!=t.chain_selected})).transition().attr("fill","black").attr("fill-opacity",1)},watcher:function(){this.rank_updater(),this.update_board()}}},mt=(n("cbce"),n("6b0d")),jt=n.n(mt);const Ot=jt()(yt,[["render",_t],["__scopeId","data-v-5dd8dadc"]]);var kt=Ot,wt={name:"App",components:{HelloWorld:kt},data:function(){return{width:document.documentElement.clientWidth-60,height:document.documentElement.clientHeight-60}}};n("83fd");const vt=jt()(wt,[["render",a]]);var Et=vt,Nt=n("5502"),Vt=Object(Nt["a"])({state:{},mutations:{},actions:{},modules:{}});n("3ad4");Object(i["createApp"])(Et).use(Vt).use(r["a"]).mount("#app")},"83fd":function(t,e,n){"use strict";n("18d0")},"8ddf":function(t,e,n){},cbce:function(t,e,n){"use strict";n("8ddf")}});
//# sourceMappingURL=app.18a67bdc.js.map